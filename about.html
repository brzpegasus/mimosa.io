<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>About/FAQ - Mimosa</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Common questions and issues.">

  <link rel="stylesheet" href="css/bootstrap3.css" >
  <link rel="stylesheet" href="css/custom.css" >

  <!-- <link rel="stylesheet" href="css/bootstrap-responsive.min.css" > -->
  <!-- <link rel="stylesheet" href="css/app.css"> -->

  <link rel="shortcut icon" href="img/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="img/apple-touch-icon-57-precomposed.png">
</head>

<body class="about-page" data-spy="scroll" data-target=".left-nav" data-offset="70">
  <nav class="navbar navbar-inverse navbar-fixed-top" >
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="./index.html">Mimosa</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class=""><a href="./started.html">Get Started</a></li>
          <li class=""><a href="./commands.html">Commands</a></li>
          <li class=""><a href="./modules.html">Modules</a></li>
          <li class=""><a href="./extend.html">Extend</a></li>
          <li class=""><a href="./configuration.html">Config</a></li>
          <li class="active"><a href="./about.html">About/FAQ</a></li>
          <li class=""><a href="http://dbashford.github.io">Blog</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container-fluid">

    <header class="jumbotron subhead" id="overview">
      <h1>About + FAQ</h1>
      <p class="lead">Common questions answered</p>
    </header>

    <div class="row">
      <div class="col-md-2 col-sm-3 left-nav" >
        <ul class="nav nav-pills nav-stacked" data-spy="affix" data-offset-top="303" data-offset-bottom="50">
          <li><a href="#upgrade21" title="upgrade to 2.1" class="active">2.1 upgrade</a></li>
          <li><a href="#upgrade20" title="upgrade to 2.0">2.0 upgrade</a></li>
          <li><a href="#git" title="git">git error?</a></li>
          <li><a href="#cpu" title="cpu burn">CPU Burn</a></li>
          <li><a href="#emfile" title="EMFILE">EMFILE</a></li>
          <li><a href="#norequirejs" title="No RequireJS">No RequireJS</a></li>
          <li><a href="#Heroku" title="Heroku">Heroku</a></li>
          <li><a href="#Azure" title="Heroku">Azure</a></li>
        </ul>
      </div>
      <div class="col-md-10 col-sm-9">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h4 id="upgrade21">2.1 upgrade</h4>
          </div>
          <div class="panel-body">
            <p><code>2.1</code> upgraded logging in a major way. There are just a few things to keep in mind when upgrading.</p>
            <ul>
              <li>All of the modules have been updated to use the latest logging functionality.  The newest modules must be used with Mimosa <code>2.1</code> as they expect Mimosa to pass them the logger.  Using the most up to date modules with older versions of Mimosa will result in errors.</li>
              <li>Version <code>2.1</code> will work fine with older versions of modules except that the logging messages will bounce back and forth between the new logging (mimosa core <code>2.1</code>) and the old logging (from the module).</li>
              <li>If you were using (overriding) the <code>growl.onsuccess</code> flags, you'll find those flags are no longer available.  They have been removed.</li>
            </ul>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading">

            <h4 id="upgrade20">2.0 upgrade</h4>
          </div>
          <div class="panel-body">
            <p><code>2.0</code> brings the externalization of Mimosa's JS/CSS/Template compilers. This slims down Mimosa's footprint, speeding up installs, and greatly simplifies the Mimosa codebase. Externalizing the compilers also sets Mimosa up for other contributors to very easily create new, external compilers of their own. Previously that would have entailed pull requests back to the main Mimosa library.</p>
            <p>Only config changes are necessary to upgrade to <code>2.0</code>.</p>
            <ul>
              <li>Each of Mimosa's JS/CSS/Template compilers now have their own Mimosa module. If using any of them, they need to be added to the <code>mimosa-config</code> <code>modules</code> array. For instance, if using CoffeeScript, Stylus and Handlebars, <code>"coffeescript", "stylus", "handlebars"</code> will need to be added to the <code>modules</code> array.</li>
              <li>Mimosa's "copy" compiler was also pulled out of Mimosa's core. That compiler handles any files that go through any sort of transpiling or preprocessing. If using images, <code>.js</code> or <code>.css</code> files, add <code>"copy"</code> to the modules list. It will be a very rare project that doesn't need to add <code>"copy"</code> to the list.</li>
              <li>Using the <code>compiler</code> config? That is going away. Each compiler module has its own configuration, including the ability to provide a specific version of the compiler and change the extensions being used for the compiler. For details on each compiler's config, check the README on that compiler's github page. For instance, here is the <a href="https://github.com/dbashford/mimosa-livescript">LiveScript README</a>.</li>
              <li>The Handlebars compiler has been pulled out into two separate compilers, one for those using ember.js, and those who are not.  This removes the need to specifically configure ember.  Instead of configuring ember, just use the ember specific compiler. The <a href="https://github.com/dbashford/mimosa-ember-handlebars">ember-handlebars</a> and <a href="https://github.com/dbashford/mimosa-handlebars">handlebars</a> github pages have details on how to configure those new modules.</li>
              <li>The mimosa-server module now depends on the project to have the correct transpilers <code>npm install</code>ed to use those transpilers for node.js server code. So, for instance, if LiveScript is being used on the server, then LiveScript must be  <code>npm install</code>ed into the project.</li>
            </ul>
          </div>
        </div>

        <h2 id="git">"Error: git is not installed or not in the PATH"</h2>
        <p>By default Mimosa uses Bower.  Bower fetches scripts and libraries from GitHub.  So, Mimosa has a dependency on git because it uses Bower.  If you don't want to install git, then you cannot use Bower.  That isn't a problem!  Just remove <code>"bower"</code> from the list of modules in your <code>mimosa-config</code>.</p>

        <h2 id="cpu">CPU running hot?</h2>
        <p>If you have a lot of files, or are using multiple watchers (like mimosa + mimosa-import-source), you might find your CPU pegged and things bogging down. Both mimosa core (<code>watch</code> settings) and mimosa-import-source have intervals you can provide it to keep it from polling the file system too often. For details, check out the <a href="https://github.com/dbashford/mimosa/issues/179">GitHub issue</a> where this was discussed.</p>
        <p>Windows Users: You can also try turn off polling altogether by turning <code>usePolling</code> to false. This might be the best option if you have truly enormous projects.</p>
        <p>*Nix users: Do not turn off polling.</p>

        <h2 id="emfile">EMFILE Issues</h2>
        <p>node.js is fast. Wicked fast. Sometimes too fast for its own good. If you have a large project with many files (usually 200+) that Mimosa has to move from one directory to another on startup, Mimosa will attempt to process all your files at once and may attempt to open more files than your system allows. When that happens, you'll see an error like this:</p>

        <pre>child_process.js:922
    throw errnoException(process._errno, 'spawn');
          ^
Error: spawn EMFILE
    at errnoException (child_process.js:975:11)
    at ChildProcess.spawn (child_process.js:922:11)
    at exports.spawn (child_process.js:710:9)
    at Object.exports.execFile (child_process.js:602:15)
    at exports.exec (child_process.js:573:18)</pre>
        <p>This problem is why the <code>watch.throttle</code> setting was created.  Check it out on the <a href="./configuration.html#watch">Configuration</a> page.</p>

        <h2 id="norequirejs">Mimosa Without Require.js?</h2>
        <p>I see search engine traffic coming to the Mimosa site having used the search term "mimosa without requirejs" quite a bit.</p>
        <p>Mimosa certainly provides a lot of sugar for RequireJS users, and it comes configured with RequireJS support enabled, but Mimosa is absolutely usable if you aren't using RequireJS. All Mimosa truly relies on RequireJS for is concatenation of scripts. Mimosa can compile, lint, minify, serve and provide live reload out of the box without using RequireJS at all.</p>
        <p>The key changes to any Mimosa project not using RequireJS are</p>
        <ul>
          <li>Remove the <code>require</code> module from the list of configured modules</li>
          <li>Script tags need to be added to the pages that need those scripts since RequireJS' module loading will not be able to pull in files for you.</li>
        </ul>
        <p>Check out this <a href="https://github.com/dbashford/MimosaNoRequireJS">example project</a> which leverages all the goodies of Mimosa without using RequireJS.</p>

        <h2 id="Heroku">Heroku</h2>
        <p>Want to push your app to Heroku?  Here's a few steps to go from no app to a Heroku app in no time at all. The following assumes you have <a href="https://id.heroku.com/signup/devcenter">signed up</a>, you have the <a href="https://toolbelt.heroku.com/">toolbelt</a> installed, and you have git installed as Heroku deploys code via git.</p>
        <h3>Initial Setup</h3>
        <p>Many of the following tasks only need to be executed once.</p>
        <ol>
          <li>Execute <code>mimosa new</code> and pick your favorite technologies. You must pick a server.</li>
          <li>Open the <code>mimosa-config</code>, uncomment the <code>modules</code> array and add <code>'web-package'</code> to the end of the array.  Note: If you already had <code>web-package</code> installed, you'll want to make sure to upgrade to the latest version. The best way to do that is to change the entry in the <code>modules</code> array to <code>web-package@0.8.0</code>. <code>0.8.0</code> is necessary for maximum Heroku support.</li>
          <li>Open <code>.gitignore</code> and change <code>/dist</code> to <code># /dist</code>. This makes the <code>dist</code> directory, which is created by the <code>web package</code> module, something that gets checked in.</li>
          <li>In the root of the project, create a file named <code>Procfile</code>, no extension.  The content of this file should be one line: <code>web: node dist/app.js</code>. This lets Heroku know how to start your app.</li>
          <li>Run <code>mimosa build -omp</code>.  This minifies, optimizes and packages up the code.</li>
          <li>Run <code>heroku login</code> and provide your credentials</li>
          <li>Run the following git commands: <code>git init</code>, <code>git add .</code>, <code>git commit -m "init"</code></li>
          <li>Run <code>heroku create</code>, which sets up the remote repo with Heroku</li>
          <li>Now push your code! <code>git push heroku master</code></li>
        </ol>
        <p>At the end of the console spam from Heroku will be the URL to your app.</p>
        <h3>After Initial Setup</h3>
        <p>Once you are passed the initial setup, the list of steps shrinks dramatically. Now its just a git repo and you need to build your app.</p>
        <ol>
          <li>Run <code>mimosa build -omp</code></li>
          <li><code>git add .</code>, <code>git commit -m "init"</code></li>
          <li><code>git push heroku master</code></li>
        </ol>

        <h2 id="Azure">Azure</h2>
        <p>Peter Morlion wrote an <a href="http://petermorlion.blogspot.be/2014/03/getting-mimosa-durandal-app-to-work-on.html">excellent blog post</a> on how to get up and running with a Mimosa node.js application in <a href="https://www.windowsazure.com/">Azure</a>. His example includes a specific UI framwork, but the steps he took are universal.</p>
      </div>
    </div>
  </div>

  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script src="js/bootstrap.min.js"></script>


  <script>
    var _gaq=[['_setAccount','UA-33737130-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>

</body>
</html>
